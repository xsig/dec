<ion-view view-title="Usuarios">
  <ion-content>
   <ion-list>
      <div class="row">
        <div class="col no-padding">
            <label class="item item-input">
                <i class="icon ion-ios-search placeholder-icon"></i>
                <input type="search" placeholder="rut" ng-model="filtro.rut">
            </label>
        </div>
        <div class="col no-padding">
            <label class="item item-input">
                <i class="icon ion-ios-search placeholder-icon"></i>
                <input type="search" placeholder="apellido" ng-model="filtro.apellido">
            </label>
        </div>
        <div class="col no-padding col-10">
            <button class="button icon ion-ios-search button-positive" on-release="buscar()"></button>
        </div>
      </div>
    </ion-list>
<!--
        <div class="bar bar-header item-input-inset">
            <label class="item-input-wrapper">
                <i class="icon ion-ios-search placeholder-icon"></i>
                <input type="search" placeholder="rut" ng-model="filtro.rut">
            </label>
            <label class="item-input-wrapper">
                <i class="icon ion-ios-search placeholder-icon"></i>
                <input type="search" placeholder="apellido" ng-model="filtro.apellido">
            </label>
            <button class="button icon ion-ios-search button-positive" on-release="buscar()"></button>
        </div>
        -->
        <div class="list">
            <li class="item-input-inset item-toggle">
                Mostrar solamente usuarios con solicitudes pendientes
                <label class="toggle toggle-positive">
                <input type="checkbox" ng-model="filtro.pendientes">
                <div class="track">
                    <div class="handle"></div>
                </div>
                </label>
            </li>
        </div>
        <div class="list" ng-show="errores">
            <ion-list ng-repeat="error in errores">
                <ion-item class="error">{{error.errDescripcion}}</ion-item>
            </ion-list>
        </div>
        <div class="item item-divider item-positive" ng-show="filtro.pendientes"> 
          Usuarios Activos
        </div>
        <ion-list ng-repeat="usuario in pendientes" ng-show="filtro.pendientes">
            <ion-item ng-if="usuario.estado=='ACTIVO' && usuario.conTramite=='SI'" href="#/app/usuario/{{usuario.rut}}">
                <div class="row">
                    <div class="col">{{usuario.rut | rutfmt}}</div>
                    <div class="col">{{usuario.apellidoPaterno}}</div>
                    <div class="col">{{usuario.nombre}}</div>
                </div>
            </ion-item>
        </ion-list>
        <div class="item item-divider item-positive" ng-show="filtro.pendientes"> 
          Usuarios Inactivos
        </div>
        <ion-list ng-repeat="usuario in pendientes" ng-show="filtro.pendientes">
            <ion-item ng-if="usuario.estado!='ACTIVO' && usuario.conTramite=='SI'" href="#/app/usuario/{{usuario.rut}}">
                <div class="row">
                    <div class="col">{{usuario.rut | rutfmt}}</div>
                    <div class="col">{{usuario.apellidoPaterno}}</div>
                    <div class="col">{{usuario.nombre}}</div>
                </div>
            </ion-item>
        </ion-list>
        <div class="item item-divider item-positive" ng-show="!filtro.pendientes"> 
          Usuarios Activos
        </div>
        <ion-list ng-repeat="usuario in usuarios" ng-show="!filtro.pendientes">
            <ion-item ng-if="usuario.estado=='ACTIVO'" href="#/app/usuario/{{usuario.rut}}">
                <div class="row">
                    <div class="col">{{usuario.rut | rutfmt}}</div>
                    <div class="col">{{usuario.apellidoPaterno}}</div>
                    <div class="col">{{usuario.nombre}}</div>
                </div>
            </ion-item>
        </ion-list>
        <div class="item item-divider item-positive" ng-show="!filtro.pendientes"> 
          Usuarios Inactivos
        </div>
        <ion-list ng-repeat="usuario in usuarios" ng-show="!filtro.pendientes">
            <ion-item ng-if="usuario.estado!='ACTIVO'" href="#/app/usuario/{{usuario.rut}}">
                <div class="row">
                    <div class="col">{{usuario.rut | rutfmt}}</div>
                    <div class="col">{{usuario.apellidoPaterno}}</div>
                    <div class="col">{{usuario.nombre}}</div>
                </div>
            </ion-item>
        </ion-list>
  </ion-content>
</ion-view>
